<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.vt.user.client.OperatorMapper">
  <resultMap id="BaseResultMap" type="com.vt.user.model.Operator">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Nov 30 10:19:42 CST 2016.
    -->
    <id column="OPERATOR_ID" jdbcType="INTEGER" property="operatorId" />
    <result column="USER_ID" jdbcType="VARCHAR" property="userId" />
    <result column="USER_NAME" jdbcType="VARCHAR" property="userName" />
    <result column="PASSWORD" jdbcType="VARCHAR" property="password" />
    <result column="INVAL_DATE" jdbcType="DATE" property="invalDate" />
    <result column="EMPID" jdbcType="VARCHAR" property="empid" />
    <result column="AUTH_MODE" jdbcType="CHAR" property="authMode" />
    <result column="STATUS" jdbcType="CHAR" property="status" />
    <result column="EMAIL" jdbcType="VARCHAR" property="email" />
    <result column="ORGID" jdbcType="INTEGER" property="orgid" />
    <result column="MENU_TYPE" jdbcType="VARCHAR" property="menuType" />
    <result column="LAST_LOGIN" jdbcType="DATE" property="lastLogin" />
    <result column="ERR_COUNT" jdbcType="INTEGER" property="errCount" />
    <result column="START_DATE" jdbcType="DATE" property="startDate" />
    <result column="END_DATE" jdbcType="DATE" property="endDate" />
    <result column="VALID_TIME" jdbcType="VARCHAR" property="validTime" />
    <result column="DEPARTMENT" jdbcType="VARCHAR" property="department" />
    <result column="FIELD1" jdbcType="VARCHAR" property="field1" />
    <result column="FIELD2" jdbcType="VARCHAR" property="field2" />
    <result column="FIELD3" jdbcType="VARCHAR" property="field3" />
    <result column="FIELD4" jdbcType="VARCHAR" property="field4" />
    <result column="FIELD5" jdbcType="VARCHAR" property="field5" />
  </resultMap>
  <sql id="Example_Where_Clause">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Nov 30 10:19:42 CST 2016.
    -->
    <where>
      <foreach collection="oredCriteria" item="criteria" separator="or">
        <if test="criteria.valid">
          <trim prefix="(" prefixOverrides="and" suffix=")">
            <foreach collection="criteria.criteria" item="criterion">
              <choose>
                <when test="criterion.noValue">
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue">
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue">
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue">
                  and ${criterion.condition}
                  <foreach close=")" collection="criterion.value" item="listItem" open="(" separator=",">
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Nov 30 10:19:42 CST 2016.
    -->
    OPERATOR_ID, USER_ID, USER_NAME, PASSWORD, INVAL_DATE, EMPID, AUTH_MODE, STATUS, 
    EMAIL, ORGID, MENU_TYPE, LAST_LOGIN, ERR_COUNT, START_DATE, END_DATE, VALID_TIME, 
    DEPARTMENT, FIELD1, FIELD2, FIELD3, FIELD4, FIELD5
  </sql>
  <select id="selectByExample" parameterType="com.vt.user.model.OperatorExample" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Nov 30 10:19:42 CST 2016.
    -->
    select
    <if test="distinct">
      distinct
    </if>
    <include refid="Base_Column_List" />
    from "t_pm_operator"
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null">
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Nov 30 10:19:42 CST 2016.
    -->
    select 
    <include refid="Base_Column_List" />
    from "t_pm_operator"
    where OPERATOR_ID = #{operatorId,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Nov 30 10:19:42 CST 2016.
    -->
    delete from "t_pm_operator"
    where OPERATOR_ID = #{operatorId,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.vt.user.model.Operator">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Nov 30 10:19:42 CST 2016.
    -->
    <selectKey keyProperty="operatorId" order="AFTER" resultType="java.lang.Integer">
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into "t_pm_operator" (USER_ID, USER_NAME, PASSWORD, 
      INVAL_DATE, EMPID, AUTH_MODE, 
      STATUS, EMAIL, ORGID, 
      MENU_TYPE, LAST_LOGIN, ERR_COUNT, 
      START_DATE, END_DATE, VALID_TIME, 
      DEPARTMENT, FIELD1, FIELD2, 
      FIELD3, FIELD4, FIELD5
      )
    values (#{userId,jdbcType=VARCHAR}, #{userName,jdbcType=VARCHAR}, #{password,jdbcType=VARCHAR}, 
      #{invalDate,jdbcType=DATE}, #{empid,jdbcType=VARCHAR}, #{authMode,jdbcType=CHAR}, 
      #{status,jdbcType=CHAR}, #{email,jdbcType=VARCHAR}, #{orgid,jdbcType=INTEGER}, 
      #{menuType,jdbcType=VARCHAR}, #{lastLogin,jdbcType=DATE}, #{errCount,jdbcType=INTEGER}, 
      #{startDate,jdbcType=DATE}, #{endDate,jdbcType=DATE}, #{validTime,jdbcType=VARCHAR}, 
      #{department,jdbcType=VARCHAR}, #{field1,jdbcType=VARCHAR}, #{field2,jdbcType=VARCHAR}, 
      #{field3,jdbcType=VARCHAR}, #{field4,jdbcType=VARCHAR}, #{field5,jdbcType=VARCHAR}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.vt.user.model.Operator">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Nov 30 10:19:42 CST 2016.
    -->
    <selectKey keyProperty="operatorId" order="AFTER" resultType="java.lang.Integer">
      SELECT LAST_INSERT_ID()
    </selectKey>
    insert into "t_pm_operator"
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="userId != null">
        USER_ID,
      </if>
      <if test="userName != null">
        USER_NAME,
      </if>
      <if test="password != null">
        PASSWORD,
      </if>
      <if test="invalDate != null">
        INVAL_DATE,
      </if>
      <if test="empid != null">
        EMPID,
      </if>
      <if test="authMode != null">
        AUTH_MODE,
      </if>
      <if test="status != null">
        STATUS,
      </if>
      <if test="email != null">
        EMAIL,
      </if>
      <if test="orgid != null">
        ORGID,
      </if>
      <if test="menuType != null">
        MENU_TYPE,
      </if>
      <if test="lastLogin != null">
        LAST_LOGIN,
      </if>
      <if test="errCount != null">
        ERR_COUNT,
      </if>
      <if test="startDate != null">
        START_DATE,
      </if>
      <if test="endDate != null">
        END_DATE,
      </if>
      <if test="validTime != null">
        VALID_TIME,
      </if>
      <if test="department != null">
        DEPARTMENT,
      </if>
      <if test="field1 != null">
        FIELD1,
      </if>
      <if test="field2 != null">
        FIELD2,
      </if>
      <if test="field3 != null">
        FIELD3,
      </if>
      <if test="field4 != null">
        FIELD4,
      </if>
      <if test="field5 != null">
        FIELD5,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="userId != null">
        #{userId,jdbcType=VARCHAR},
      </if>
      <if test="userName != null">
        #{userName,jdbcType=VARCHAR},
      </if>
      <if test="password != null">
        #{password,jdbcType=VARCHAR},
      </if>
      <if test="invalDate != null">
        #{invalDate,jdbcType=DATE},
      </if>
      <if test="empid != null">
        #{empid,jdbcType=VARCHAR},
      </if>
      <if test="authMode != null">
        #{authMode,jdbcType=CHAR},
      </if>
      <if test="status != null">
        #{status,jdbcType=CHAR},
      </if>
      <if test="email != null">
        #{email,jdbcType=VARCHAR},
      </if>
      <if test="orgid != null">
        #{orgid,jdbcType=INTEGER},
      </if>
      <if test="menuType != null">
        #{menuType,jdbcType=VARCHAR},
      </if>
      <if test="lastLogin != null">
        #{lastLogin,jdbcType=DATE},
      </if>
      <if test="errCount != null">
        #{errCount,jdbcType=INTEGER},
      </if>
      <if test="startDate != null">
        #{startDate,jdbcType=DATE},
      </if>
      <if test="endDate != null">
        #{endDate,jdbcType=DATE},
      </if>
      <if test="validTime != null">
        #{validTime,jdbcType=VARCHAR},
      </if>
      <if test="department != null">
        #{department,jdbcType=VARCHAR},
      </if>
      <if test="field1 != null">
        #{field1,jdbcType=VARCHAR},
      </if>
      <if test="field2 != null">
        #{field2,jdbcType=VARCHAR},
      </if>
      <if test="field3 != null">
        #{field3,jdbcType=VARCHAR},
      </if>
      <if test="field4 != null">
        #{field4,jdbcType=VARCHAR},
      </if>
      <if test="field5 != null">
        #{field5,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.vt.user.model.OperatorExample" resultType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Nov 30 10:19:42 CST 2016.
    -->
    select count(*) from "t_pm_operator"
    <if test="_parameter != null">
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByPrimaryKeySelective" parameterType="com.vt.user.model.Operator">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Nov 30 10:19:42 CST 2016.
    -->
    update "t_pm_operator"
    <set>
      <if test="userId != null">
        USER_ID = #{userId,jdbcType=VARCHAR},
      </if>
      <if test="userName != null">
        USER_NAME = #{userName,jdbcType=VARCHAR},
      </if>
      <if test="password != null">
        PASSWORD = #{password,jdbcType=VARCHAR},
      </if>
      <if test="invalDate != null">
        INVAL_DATE = #{invalDate,jdbcType=DATE},
      </if>
      <if test="empid != null">
        EMPID = #{empid,jdbcType=VARCHAR},
      </if>
      <if test="authMode != null">
        AUTH_MODE = #{authMode,jdbcType=CHAR},
      </if>
      <if test="status != null">
        STATUS = #{status,jdbcType=CHAR},
      </if>
      <if test="email != null">
        EMAIL = #{email,jdbcType=VARCHAR},
      </if>
      <if test="orgid != null">
        ORGID = #{orgid,jdbcType=INTEGER},
      </if>
      <if test="menuType != null">
        MENU_TYPE = #{menuType,jdbcType=VARCHAR},
      </if>
      <if test="lastLogin != null">
        LAST_LOGIN = #{lastLogin,jdbcType=DATE},
      </if>
      <if test="errCount != null">
        ERR_COUNT = #{errCount,jdbcType=INTEGER},
      </if>
      <if test="startDate != null">
        START_DATE = #{startDate,jdbcType=DATE},
      </if>
      <if test="endDate != null">
        END_DATE = #{endDate,jdbcType=DATE},
      </if>
      <if test="validTime != null">
        VALID_TIME = #{validTime,jdbcType=VARCHAR},
      </if>
      <if test="department != null">
        DEPARTMENT = #{department,jdbcType=VARCHAR},
      </if>
      <if test="field1 != null">
        FIELD1 = #{field1,jdbcType=VARCHAR},
      </if>
      <if test="field2 != null">
        FIELD2 = #{field2,jdbcType=VARCHAR},
      </if>
      <if test="field3 != null">
        FIELD3 = #{field3,jdbcType=VARCHAR},
      </if>
      <if test="field4 != null">
        FIELD4 = #{field4,jdbcType=VARCHAR},
      </if>
      <if test="field5 != null">
        FIELD5 = #{field5,jdbcType=VARCHAR},
      </if>
    </set>
    where OPERATOR_ID = #{operatorId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.vt.user.model.Operator">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Nov 30 10:19:42 CST 2016.
    -->
    update "t_pm_operator"
    set USER_ID = #{userId,jdbcType=VARCHAR},
      USER_NAME = #{userName,jdbcType=VARCHAR},
      PASSWORD = #{password,jdbcType=VARCHAR},
      INVAL_DATE = #{invalDate,jdbcType=DATE},
      EMPID = #{empid,jdbcType=VARCHAR},
      AUTH_MODE = #{authMode,jdbcType=CHAR},
      STATUS = #{status,jdbcType=CHAR},
      EMAIL = #{email,jdbcType=VARCHAR},
      ORGID = #{orgid,jdbcType=INTEGER},
      MENU_TYPE = #{menuType,jdbcType=VARCHAR},
      LAST_LOGIN = #{lastLogin,jdbcType=DATE},
      ERR_COUNT = #{errCount,jdbcType=INTEGER},
      START_DATE = #{startDate,jdbcType=DATE},
      END_DATE = #{endDate,jdbcType=DATE},
      VALID_TIME = #{validTime,jdbcType=VARCHAR},
      DEPARTMENT = #{department,jdbcType=VARCHAR},
      FIELD1 = #{field1,jdbcType=VARCHAR},
      FIELD2 = #{field2,jdbcType=VARCHAR},
      FIELD3 = #{field3,jdbcType=VARCHAR},
      FIELD4 = #{field4,jdbcType=VARCHAR},
      FIELD5 = #{field5,jdbcType=VARCHAR}
    where OPERATOR_ID = #{operatorId,jdbcType=INTEGER}
  </update>

    <resultMap id="orgAndOptResultMap" type="com.vt.user.vo.OrgAndOperatorVO">
        <result column="OPERATOR_ID" jdbcType="INTEGER" property="operatorId" />
        <result column="USER_NAME" jdbcType="VARCHAR" property="userName" />
        <result column="FULL_NAME" jdbcType="VARCHAR" property="fullName" />
        <result column="EMPID" jdbcType="VARCHAR" property="empid" />
        <result column="STATUS" jdbcType="CHAR" property="status" />
        <result column="START_DATE" jdbcType="DATE" property="startDate" />
        <result column="END_DATE" jdbcType="DATE" property="endDate" />
        <result column="DEPARTMENT" jdbcType="VARCHAR" property="department" />
        <result column="ORG_ID" jdbcType="INTEGER" property="orgId" />
        <result column="ORG_CODE" jdbcType="VARCHAR" property="orgCode" />
        <result column="ORG_NAME" jdbcType="VARCHAR" property="orgName" />
        <result column="ORG_LEVEL" jdbcType="VARCHAR" property="orgLevel" />
        <result column="PARENT_ORG_ID" jdbcType="INTEGER" property="parentOrgId" />
        <result column="ORG_TYPE" jdbcType="VARCHAR" property="orgType" />
        <result column="ORG_ADDRESS" jdbcType="VARCHAR" property="orgAddress" />
        <result column="EFFECT_DATE" jdbcType="DATE" property="effectDate" />
        <result column="INVALID_DATE" jdbcType="DATE" property="invalidDate" />
        <result column="ORG_STATE" jdbcType="VARCHAR" property="orgState" />
        <result column="REGION" jdbcType="VARCHAR" property="region" />
        <result column="REMARK" jdbcType="VARCHAR" property="remark" />
    </resultMap>
    <resultMap id="roleAndResResultMap" type="com.vt.user.vo.OrgAndOperatorVO">
        <result column="OPERATOR_ID" jdbcType="INTEGER" property="operatorId" />
        <result column="USER_NAME" jdbcType="VARCHAR" property="userName" />
        <result column="FULL_NAME" jdbcType="VARCHAR" property="fullName" />
        <result column="EMPID" jdbcType="VARCHAR" property="empid" />
        <result column="STATUS" jdbcType="CHAR" property="status" />
        <result column="START_DATE" jdbcType="DATE" property="startDate" />
        <result column="END_DATE" jdbcType="DATE" property="endDate" />
        <result column="RES_ID" jdbcType="INTEGER" property="resId" />
        <result column="RES_CODE" jdbcType="VARCHAR" property="resCode" />
        <result column="RES_NAME" jdbcType="VARCHAR" property="resName" />
        <result column="FUNC_NAME" jdbcType="VARCHAR" property="funcName" />
        <result column="RES_SEQ" jdbcType="VARCHAR" property="resSeq" />
        <result column="PARENT_ID" jdbcType="INTEGER" property="parentId" />
        <result column="IS_LEAF" jdbcType="CHAR" property="isLeaf" />
        <result column="RES_LEVEL" jdbcType="INTEGER" property="resLevel" />
        <result column="RES_PATH" jdbcType="VARCHAR" property="resPath" />
        <result column="RES_STATUS" jdbcType="CHAR" property="resStatus" />
    </resultMap>
    <!-- add by john 查询机构及用户结果信息列表 20150603 start -->
    <select id="selectOrgAndOptList" parameterType="com.vt.user.model.Operator" resultMap="orgAndOptResultMap">
        SELECT
        TPO.OPERATOR_ID,
        TPO.USER_NAME,
        TPO.FULL_NAME,
        TPO.EMPID,
        TPO.STATUS,
        TPO.START_DATE,
        TPO.END_DATE,
        TPO. DEPARTMENT,
        TPON.ORG_ID,
        TPON.ORG_CODE,
        TPON.ORG_NAME,
        TPON.ORG_LEVEL,
        TPON.PARENT_ORG_ID,
        TPON.ORG_TYPE,
        TPON.ORG_ADDRESS,
        TPON.EFFECT_DATE,
        TPON.INVALID_DATE,
        TPON.ORG_STATE,
        TPON.REGION
        FROM
        T_PM_OPERATOR TPO
        JOIN T_PM_OPER_ORG_REL TPOOR
        ON TPOOR.OPER_ID = TPO.OPERATOR_ID
        JOIN T_PM_ORGANIZATION TPON
        ON TPON.ORG_ID = TPOOR.ORG_ID
        <where>
            <if test="operatorId != null">
                TPO.OPERATOR_ID = #{operatorId,jdbcType=INTEGER},
            </if>
            <if test="userName != null">
                TPO.USER_NAME = #{userName,jdbcType=VARCHAR},
            </if>
        </where>
    </select>
    <!-- add by john 查询机构及用户结果信息列表20150603 end -->
    <!-- add by john 查询用户与角色资源信息列表 20150603 start -->
    <select id="selectRoleAndResList" parameterType="com.vt.user.model.Operator" resultMap="roleAndResResultMap">
        (
        SELECT
        TPO.OPERATOR_ID AS OPERATOR_ID,
        TPO.FULL_NAME AS FULL_NAME,
        TPO.USER_NAME AS USER_NAME,
        TPO.EMPID AS EMPID,
        TPO.STATUS AS STATUS,
        TPO.START_DATE AS START_DATE,
        TPO.END_DATE AS END_DATE,
        TPO.DEPARTMENT AS DEPARTMENT,
        TPRE.RES_ID AS RES_ID,
        TPRE.RES_CODE AS RES_CODE,
        TPRE.RES_NAME AS RES_NAME,
        TPRE.FUNC_NAME AS FUNC_NAME,
        TPRE.RES_SEQ AS RES_SEQ,
        TPRE.PARENT_ID AS PARENT_ID,
        TPRE.IS_LEAF AS IS_LEAF,
        TPRE.RES_LEVEL AS RES_LEVEL,
        TPRE.RES_PATH RES_PATH,
        TPRE.STATUS AS RES_STATUS
        FROM
        T_PM_OPERATOR TPO
        JOIN T_PM_OPER_ROLE_REL TPORR
        ON TPORR.OPERATOR_ID = TPO.OPERATOR_ID
        JOIN T_PM_ROLE TPR
        ON TPR.ROLE_ID = TPORR.ROLE_ID
        JOIN "t_pm_role_res_rel" TPRRR
        ON TPRRR.ROLE_ID = TPR.ROLE_ID
        JOIN T_PM_RESOURCE TPRE
        ON TPRE.RES_ID = TPRRR.RES_ID
        <where>
            <if test="operatorId != null">
                TPO.OPERATOR_ID = #{operatorId,jdbcType=INTEGER},
            </if>
            <if test="userName != null">
                TPO.USER_NAME = #{userName,jdbcType=VARCHAR},
            </if>
        </where>
        )
        UNION ALL
        (
        SELECT
        TP.OPERATOR_ID AS OPERATOR_ID,
        TP.FULL_NAME AS FULL_NAME,
        TP.USER_NAME AS USER_NAME,
        TP.EMPID AS EMPID,
        TP.STATUS AS STATUS,
        TP.START_DATE AS START_DATE,
        TP.END_DATE AS END_DATE,
        TP.DEPARTMENT AS DEPARTMENT,
        TPR.RES_ID AS RES_ID,
        TPR.RES_CODE AS RES_CODE,
        TPR.RES_NAME AS RES_NAME,
        TPR.FUNC_NAME AS FUNC_NAME,
        TPR.RES_SEQ AS RES_SEQ,
        TPR.PARENT_ID AS PARENT_ID,
        TPR.IS_LEAF AS IS_LEAF,
        TPR.RES_LEVEL AS RES_LEVEL,
        TPR.RES_PATH AS RES_PATH,
        TPR.STATUS AS RES_STATUS
        FROM
        T_PM_OPERATOR TP
        JOIN T_PM_OPER_RES_REL TPOR
        ON TPOR.OPERATOR_ID = TP.OPERATOR_ID
        JOIN T_PM_RESOURCE TPR
        ON TPR.RES_ID = TPOR.RES_ID
        <where>
            <if test="operatorId != null">
                TP.OPERATOR_ID = #{operatorId,jdbcType=INTEGER},
            </if>
            <if test="userName != null">
                TP.USER_NAME = #{userName,jdbcType=VARCHAR},
            </if>
        </where>
        )

    </select>
    <!-- add by john 查询用户与角色资源信息列表 20150603 end -->

    <select id="queryUserIdsByRoleIdsAndOrgId" parameterType="java.util.HashMap" resultMap="BaseResultMap">
        SELECT DISTINCT op.*
        FROM "t_pm_oper_role_rel" rel, T_PM_OPERATOR op
        WHERE REL.OPERATOR_ID = OP.OPERATOR_ID
        AND OP.ORGID = #{orgId}
        <if test="orgId != null">
            AND OP.ORGID = #{orgId}
        </if>
        AND REL.ROLE_ID in
        <foreach close=")" collection="roleIds" index="index" item="roleId" open="(" separator=",">
            #{roleId}
        </foreach>
    </select>
    <!--根据角色编码查询用户列表 -->
    <select id="queryOperatorListByRoleCode" parameterType="java.util.HashMap" resultMap="BaseResultMap">
        select DISTINCT O.*
        from T_PM_OPERATOR O,T_PM_OPER_ROLE_REL L,T_PM_ROLE R
        <where>
            <if test="roleCode != null">
                R.ROLE_CODE = #{roleCode} AND R.ROLE_ID=L.ROLE_ID AND L.OPERATOR_ID = O.OPERATOR_ID
            </if>
            <if test="status != null">
                AND O.STATUS=#{status}
            </if>
            <if test="userName != null">
                AND O.USER_NAME LIKE #{userName}
            </if>
            <if test="fullName != null">
                AND O.FULL_NAME LIKE #{fullName}
            </if>
        </where>
        order by O.OPERATOR_ID
    </select>
    <select id="getUserList" parameterType="com.vt.user.model.Operator" resultMap="BaseResultMap">
    	   select
    			op.FULL_NAME,            /*真实姓名*/
         	    op.FIELD5,               /*卡号*/
				op.FIELD2,               /*身份证号*/
				bank.BANK_NAME as FIELD3 /*银行名称*/
        from T_PM_OPERATOR op join T_BANK_PARAM bank on bank.BANK_NO=op.FIELD3
        where  1=1
          <if test="fullName != null"> 
           	op.FULL_NAME like  '%#{fullName}%'
           </if>
           <if test="field5 != null"> 
           	and op.FIELD5 like '%#{field5}%'
           </if>
           <if test="field2 != null"> 
           	and op.FIELD2 like '%#{field2}%'
           </if>
            
             
             
    </select>
</mapper>