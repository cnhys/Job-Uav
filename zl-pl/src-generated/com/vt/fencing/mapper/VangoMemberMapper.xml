<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.vt.fencing.client.VangoMemberMapper">

	
	
	<sql id="sealInfoColumns">
		a.id AS "id",
		a.seal_identification AS "sealIdentification",
		a.seal_id AS "sealId",
		a.seal_name AS "sealName",
		a.seal_picture AS "sealPicture",
		a.remakes AS "remakes"
	</sql>
	
	<sql id="sealInfoJoins">
	</sql>
	<!-- 查询印章信息列表 -->
	<select id="selectSealInfoList" resultType="com.vt.fencing.model.SealInfo">
		SELECT 
			<include refid="sealInfoColumns"/>
		FROM seal_info a
		<include refid="sealInfoJoins"/>
		<where>
			
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
			</otherwise>
		</choose>
	</select>
	
	<!-- 保存印章信息-->
	<insert id="insertSealInfo" parameterType="com.vt.fencing.model.SealInfo">
		INSERT INTO seal_info(
			id,
			seal_identification,
			seal_id,
			seal_name,
			seal_picture
		) VALUES (
			#{id},
			#{sealIdentification},
			#{sealId},
			#{sealName},
			#{sealPicture}
		)
	</insert>







	<resultMap id="BaseResultMap" type="com.vt.fencing.model.VangoMember">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Dec 20 
			15:48:42 CST 2016. -->
		<id column="MEMBER_ID" jdbcType="INTEGER" property="memberId" />
		<result column="MEMBER_CODE" jdbcType="VARCHAR" property="memberCode" />
		<result column="MEMBER_NAME" jdbcType="VARCHAR" property="memberName" />
		<result column="MEMBER_NICKNAME" jdbcType="VARCHAR" property="memberNickname" />
		<result column="MEMBER_IMAGE" jdbcType="VARCHAR" property="memberImage" />
		<result column="CREDENTIALS_TYPE" jdbcType="VARCHAR" property="credentialsType" />
		<result column="ID_NO" jdbcType="VARCHAR" property="idNo" />
		<result column="CREDENTIALS_VALID_DATE" jdbcType="DATE"
			property="credentialsValidDate" />
		<result column="MOBILE" jdbcType="VARCHAR" property="mobile" />
		<result column="PASSWORD" jdbcType="VARCHAR" property="password" />
		<result column="EMAIL" jdbcType="VARCHAR" property="email" />
		<result column="REG_DATE" jdbcType="DATE" property="regDate" />
		<result column="MEMBER_STATUS" jdbcType="VARCHAR" property="memberStatus" />
		<result column="CREATE_DATE" jdbcType="DATE" property="createDate" />
		<result column="CREATOR" jdbcType="VARCHAR" property="creator" />
		<result column="IS_AUDIT" jdbcType="BIGINT" property="isAudit" />
		<result column="IS_DELETED" jdbcType="BIGINT" property="isDeleted" />
		<result column="MODIFIER" jdbcType="VARCHAR" property="modifier" />
		<result column="MODIFY_DATE" jdbcType="DATE" property="modifyDate" />
		<result column="CREATOR_DEPT_CODE" jdbcType="VARCHAR" property="creatorDeptCode" />
		<result column="CRM_STADIUM_CODE" jdbcType="VARCHAR" property="crmStadiumCode" />
	</resultMap>
	<resultMap extends="BaseResultMap" id="ResultMapWithBLOBs"
		type="com.vt.fencing.model.VangoMember">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Dec 20 
			15:48:42 CST 2016. -->
		<result column="REMARK" jdbcType="LONGVARCHAR" property="remark" />
	</resultMap>
	<sql id="Example_Where_Clause">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Dec 20 
			15:48:42 CST 2016. -->
		<where>
			<foreach collection="oredCriteria" item="criteria" separator="or">
				<if test="criteria.valid">
					<trim prefix="(" prefixOverrides="and" suffix=")">
						<foreach collection="criteria.criteria" item="criterion">
							<choose>
								<when test="criterion.noValue">
									and ${criterion.condition}
								</when>
								<when test="criterion.singleValue">
									and ${criterion.condition} #{criterion.value}
								</when>
								<when test="criterion.betweenValue">
									and ${criterion.condition} #{criterion.value}
									and
									#{criterion.secondValue}
								</when>
								<when test="criterion.listValue">
									and ${criterion.condition}
									<foreach close=")" collection="criterion.value" item="listItem"
										open="(" separator=",">
										#{listItem}
									</foreach>
								</when>
							</choose>
						</foreach>
					</trim>
				</if>
			</foreach>
		</where>
	</sql>
	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Dec 20 
			15:48:42 CST 2016. -->
		MEMBER_ID, MEMBER_CODE, MEMBER_NAME, MEMBER_NICKNAME, MEMBER_IMAGE,
		CREDENTIALS_TYPE,
		ID_NO, CREDENTIALS_VALID_DATE, MOBILE, PASSWORD,
		EMAIL, REG_DATE,
		MEMBER_STATUS,
		CREATE_DATE, CREATOR, IS_AUDIT,
		IS_DELETED, MODIFIER, MODIFY_DATE,
		CREATOR_DEPT_CODE,
		CRM_STADIUM_CODE
	</sql>
	<sql id="Blob_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Dec 20 
			15:48:42 CST 2016. -->
		REMARK
	</sql>
	<select id="selectByExampleWithBLOBs" parameterType="com.vt.fencing.model.VangoMemberExample"
		resultMap="ResultMapWithBLOBs">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Dec 20 
			15:48:42 CST 2016. -->
		select
		<if test="distinct">
			distinct
		</if>
		<include refid="Base_Column_List" />
		,
		<include refid="Blob_Column_List" />
		from t_vango_member
		<if test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
		<if test="orderByClause != null">
			order by ${orderByClause}
		</if>
	</select>
	<select id="selectByExample" parameterType="com.vt.fencing.model.VangoMemberExample"
		resultMap="BaseResultMap">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Dec 20 
			15:48:42 CST 2016. -->
		select
		<if test="distinct">
			distinct
		</if>
		<include refid="Base_Column_List" />
		from "t_vango_member"
		<if test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
		<if test="orderByClause != null">
			order by ${orderByClause}
		</if>
	</select>
	<select id="selectByPrimaryKey" parameterType="java.lang.Integer"
		resultMap="ResultMapWithBLOBs">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Dec 20 
			15:48:42 CST 2016. -->
		select
		<include refid="Base_Column_List" />
		,
		<include refid="Blob_Column_List" />
		from t_vango_member
		where MEMBER_ID = #{memberId,jdbcType=INTEGER}
	</select>
	<delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Dec 20 
			15:48:42 CST 2016. -->
		delete from t_vango_member
		where MEMBER_ID =
		#{memberId,jdbcType=INTEGER}
	</delete>
	<insert id="insert" parameterType="com.vt.fencing.model.VangoMember">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Dec 20 
			15:48:42 CST 2016. -->
		<selectKey keyProperty="memberId" order="AFTER" resultType="java.lang.Integer">
			SELECT LAST_INSERT_ID()
		</selectKey>
		MEMBER_IMAGE, CREDENTIALS_TYPE, ID_NO,
		CREDENTIALS_VALID_DATE, MOBILE,
		PASSWORD,
		EMAIL, REG_DATE, MEMBER_STATUS,
		CREATE_DATE, CREATOR,
		IS_AUDIT,
		IS_DELETED, MODIFIER, MODIFY_DATE,
		CREATOR_DEPT_CODE,
		CRM_STADIUM_CODE, REMARK
		)
		values (#{memberCode,jdbcType=VARCHAR},
		#{memberName,jdbcType=VARCHAR},
		#{memberNickname,jdbcType=VARCHAR},
		#{memberImage,jdbcType=VARCHAR}, #{credentialsType,jdbcType=VARCHAR},
		#{idNo,jdbcType=VARCHAR},
		#{credentialsValidDate,jdbcType=DATE},
		#{mobile,jdbcType=VARCHAR},
		#{password,jdbcType=VARCHAR},
		#{email,jdbcType=VARCHAR}, #{regDate,jdbcType=DATE},
		#{memberStatus,jdbcType=VARCHAR},
		#{createDate,jdbcType=DATE},
		#{creator,jdbcType=VARCHAR},
		#{isAudit,jdbcType=BIGINT},
		#{isDeleted,jdbcType=BIGINT}, #{modifier,jdbcType=VARCHAR},
		#{modifyDate,jdbcType=DATE},
		#{creatorDeptCode,jdbcType=VARCHAR},
		#{crmStadiumCode,jdbcType=VARCHAR}, #{remark,jdbcType=LONGVARCHAR}
		)
	</insert>
	<insert id="insertSelective" parameterType="com.vt.fencing.model.VangoMember">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Dec 20 
			15:48:42 CST 2016. -->
		<selectKey keyProperty="memberId" order="AFTER" resultType="java.lang.Integer">
			SELECT LAST_INSERT_ID()
		</selectKey>
		insert into t_vango_member
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="memberCode != null">
				MEMBER_CODE,
			</if>
			<if test="memberName != null">
				MEMBER_NAME,
			</if>
			<if test="memberNickname != null">
				MEMBER_NICKNAME,
			</if>
			<if test="memberImage != null">
				MEMBER_IMAGE,
			</if>
			<if test="credentialsType != null">
				CREDENTIALS_TYPE,
			</if>
			<if test="idNo != null">
				ID_NO,
			</if>
			<if test="credentialsValidDate != null">
				CREDENTIALS_VALID_DATE,
			</if>
			<if test="mobile != null">
				MOBILE,
			</if>
			<if test="password != null">
				PASSWORD,
			</if>
			<if test="email != null">
				EMAIL,
			</if>
			<if test="regDate != null">
				REG_DATE,
			</if>
			<if test="memberStatus != null">
				MEMBER_STATUS,
			</if>
			<if test="createDate != null">
				CREATE_DATE,
			</if>
			<if test="creator != null">
				CREATOR,
			</if>
			<if test="isAudit != null">
				IS_AUDIT,
			</if>
			<if test="isDeleted != null">
				IS_DELETED,
			</if>
			<if test="modifier != null">
				MODIFIER,
			</if>
			<if test="modifyDate != null">
				MODIFY_DATE,
			</if>
			<if test="creatorDeptCode != null">
				CREATOR_DEPT_CODE,
			</if>
			<if test="crmStadiumCode != null">
				CRM_STADIUM_CODE,
			</if>
			<if test="remark != null">
				REMARK,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="memberCode != null">
				#{memberCode,jdbcType=VARCHAR},
			</if>
			<if test="memberName != null">
				#{memberName,jdbcType=VARCHAR},
			</if>
			<if test="memberNickname != null">
				#{memberNickname,jdbcType=VARCHAR},
			</if>
			<if test="memberImage != null">
				#{memberImage,jdbcType=VARCHAR},
			</if>
			<if test="credentialsType != null">
				#{credentialsType,jdbcType=VARCHAR},
			</if>
			<if test="idNo != null">
				#{idNo,jdbcType=VARCHAR},
			</if>
			<if test="credentialsValidDate != null">
				#{credentialsValidDate,jdbcType=DATE},
			</if>
			<if test="mobile != null">
				#{mobile,jdbcType=VARCHAR},
			</if>
			<if test="password != null">
				#{password,jdbcType=VARCHAR},
			</if>
			<if test="email != null">
				#{email,jdbcType=VARCHAR},
			</if>
			<if test="regDate != null">
				#{regDate,jdbcType=DATE},
			</if>
			<if test="memberStatus != null">
				#{memberStatus,jdbcType=VARCHAR},
			</if>
			<if test="createDate != null">
				#{createDate,jdbcType=DATE},
			</if>
			<if test="creator != null">
				#{creator,jdbcType=VARCHAR},
			</if>
			<if test="isAudit != null">
				#{isAudit,jdbcType=BIGINT},
			</if>
			<if test="isDeleted != null">
				#{isDeleted,jdbcType=BIGINT},
			</if>
			<if test="modifier != null">
				#{modifier,jdbcType=VARCHAR},
			</if>
			<if test="modifyDate != null">
				#{modifyDate,jdbcType=DATE},
			</if>
			<if test="creatorDeptCode != null">
				#{creatorDeptCode,jdbcType=VARCHAR},
			</if>
			<if test="crmStadiumCode != null">
				#{crmStadiumCode,jdbcType=VARCHAR},
			</if>
			<if test="remark != null">
				#{remark,jdbcType=LONGVARCHAR},
			</if>
		</trim>
	</insert>
	<select id="countByExample" parameterType="com.vt.fencing.model.VangoMemberExample"
		resultType="java.lang.Integer">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Dec 20 
			15:48:42 CST 2016. -->
		select count(*) from t_vango_member
		<if test="_parameter != null">
			<include refid="Example_Where_Clause" />
		</if>
	</select>
	<update id="updateByPrimaryKeySelective" parameterType="com.vt.fencing.model.VangoMember">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Dec 20 
			15:48:42 CST 2016. -->
		update t_vango_member
		<set>
			<if test="memberCode != null">
				MEMBER_CODE = #{memberCode,jdbcType=VARCHAR},
			</if>
			<if test="memberName != null">
				MEMBER_NAME = #{memberName,jdbcType=VARCHAR},
			</if>
			<if test="memberNickname != null">
				MEMBER_NICKNAME = #{memberNickname,jdbcType=VARCHAR},
			</if>
			<if test="memberImage != null">
				MEMBER_IMAGE = #{memberImage,jdbcType=VARCHAR},
			</if>
			<if test="credentialsType != null">
				CREDENTIALS_TYPE = #{credentialsType,jdbcType=VARCHAR},
			</if>
			<if test="idNo != null">
				ID_NO = #{idNo,jdbcType=VARCHAR},
			</if>
			<if test="credentialsValidDate != null">
				CREDENTIALS_VALID_DATE =
				#{credentialsValidDate,jdbcType=DATE},
			</if>
			<if test="mobile != null">
				MOBILE = #{mobile,jdbcType=VARCHAR},
			</if>
			<if test="password != null">
				PASSWORD = #{password,jdbcType=VARCHAR},
			</if>
			<if test="email != null">
				EMAIL = #{email,jdbcType=VARCHAR},
			</if>
			<if test="regDate != null">
				REG_DATE = #{regDate,jdbcType=DATE},
			</if>
			<if test="memberStatus != null">
				MEMBER_STATUS = #{memberStatus,jdbcType=VARCHAR},
			</if>
			<if test="createDate != null">
				CREATE_DATE = #{createDate,jdbcType=DATE},
			</if>
			<if test="creator != null">
				CREATOR = #{creator,jdbcType=VARCHAR},
			</if>
			<if test="isAudit != null">
				IS_AUDIT = #{isAudit,jdbcType=BIGINT},
			</if>
			<if test="isDeleted != null">
				IS_DELETED = #{isDeleted,jdbcType=BIGINT},
			</if>
			<if test="modifier != null">
				MODIFIER = #{modifier,jdbcType=VARCHAR},
			</if>
			<if test="modifyDate != null">
				MODIFY_DATE = #{modifyDate,jdbcType=DATE},
			</if>
			<if test="creatorDeptCode != null">
				CREATOR_DEPT_CODE = #{creatorDeptCode,jdbcType=VARCHAR},
			</if>
			<if test="crmStadiumCode != null">
				CRM_STADIUM_CODE = #{crmStadiumCode,jdbcType=VARCHAR},
			</if>
			<if test="remark != null">
				REMARK = #{remark,jdbcType=LONGVARCHAR},
			</if>
		</set>
		where MEMBER_ID = #{memberId,jdbcType=INTEGER}
	</update>
	<update id="updateByPrimaryKeyWithBLOBs" parameterType="com.vt.fencing.model.VangoMember">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Dec 20 
			15:48:42 CST 2016. -->
		update t_vango_member
		set MEMBER_CODE = #{memberCode,jdbcType=VARCHAR},
		MEMBER_NAME = #{memberName,jdbcType=VARCHAR},
		MEMBER_NICKNAME =
		#{memberNickname,jdbcType=VARCHAR},
		MEMBER_IMAGE =
		#{memberImage,jdbcType=VARCHAR},
		CREDENTIALS_TYPE =
		#{credentialsType,jdbcType=VARCHAR},
		ID_NO = #{idNo,jdbcType=VARCHAR},
		CREDENTIALS_VALID_DATE = #{credentialsValidDate,jdbcType=DATE},
		MOBILE
		= #{mobile,jdbcType=VARCHAR},
		PASSWORD = #{password,jdbcType=VARCHAR},
		EMAIL = #{email,jdbcType=VARCHAR},
		REG_DATE = #{regDate,jdbcType=DATE},
		MEMBER_STATUS = #{memberStatus,jdbcType=VARCHAR},
		CREATE_DATE =
		#{createDate,jdbcType=DATE},
		CREATOR = #{creator,jdbcType=VARCHAR},
		IS_AUDIT = #{isAudit,jdbcType=BIGINT},
		IS_DELETED =
		#{isDeleted,jdbcType=BIGINT},
		MODIFIER = #{modifier,jdbcType=VARCHAR},
		MODIFY_DATE = #{modifyDate,jdbcType=DATE},
		CREATOR_DEPT_CODE =
		#{creatorDeptCode,jdbcType=VARCHAR},
		CRM_STADIUM_CODE =
		#{crmStadiumCode,jdbcType=VARCHAR},
		REMARK =
		#{remark,jdbcType=LONGVARCHAR}
		where MEMBER_ID =
		#{memberId,jdbcType=INTEGER}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.vt.fencing.model.VangoMember">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Dec 20 
			15:48:42 CST 2016. -->
		update t_vango_member
		set MEMBER_CODE = #{memberCode,jdbcType=VARCHAR},
		MEMBER_NAME = #{memberName,jdbcType=VARCHAR},
		MEMBER_NICKNAME =
		#{memberNickname,jdbcType=VARCHAR},
		MEMBER_IMAGE =
		#{memberImage,jdbcType=VARCHAR},
		CREDENTIALS_TYPE =
		#{credentialsType,jdbcType=VARCHAR},
		ID_NO = #{idNo,jdbcType=VARCHAR},
		CREDENTIALS_VALID_DATE = #{credentialsValidDate,jdbcType=DATE},
		MOBILE
		= #{mobile,jdbcType=VARCHAR},
		PASSWORD = #{password,jdbcType=VARCHAR},
		EMAIL = #{email,jdbcType=VARCHAR},
		REG_DATE = #{regDate,jdbcType=DATE},
		MEMBER_STATUS = #{memberStatus,jdbcType=VARCHAR},
		CREATE_DATE =
		#{createDate,jdbcType=DATE},
		CREATOR = #{creator,jdbcType=VARCHAR},
		IS_AUDIT = #{isAudit,jdbcType=BIGINT},
		IS_DELETED =
		#{isDeleted,jdbcType=BIGINT},
		MODIFIER = #{modifier,jdbcType=VARCHAR},
		MODIFY_DATE = #{modifyDate,jdbcType=DATE},
		CREATOR_DEPT_CODE =
		#{creatorDeptCode,jdbcType=VARCHAR},
		CRM_STADIUM_CODE =
		#{crmStadiumCode,jdbcType=VARCHAR}
		where MEMBER_ID =
		#{memberId,jdbcType=INTEGER}
	</update>







	<resultMap id="baseUserMap" type="com.vt.fencing.model.AaUserLogin">
		<id column="USER_ID" jdbcType="INTEGER" property="userId" />
		<result column="USER_NAME" jdbcType="VARCHAR" property="userName" />
		<result column="USER_LOGIN_ACCOUNT" jdbcType="VARCHAR" property="userLoginAccount" />
		<result column="USER_PWD" jdbcType="VARCHAR" property="userPwd" />
		<result column="USER_AGE" jdbcType="INTEGER" property="userAge" />
		<result column="USER_SEX" jdbcType="VARCHAR" property="userSex" />
		<result column="USER_BIRTHDAY" jdbcType="DATE" property="userBirthday" />
		<result column="USER_CARD_TYPE" jdbcType="INTEGER" property="userCardType" />
		<result column="ROLE_ID" jdbcType="INTEGER" property="roleId" />
		<result column="USER_FSZH" jdbcType="VARCHAR" property="userFszh" />
		<result column="USER_DEP" jdbcType="VARCHAR" property="userDep" />
		<result column="USER_ADDRESS" jdbcType="VARCHAR" property="userAddress" />
		<result column="USER_MOBILE_PHONE" jdbcType="VARCHAR" property="userMobilePhone" />
		<result column="USER_PHONE" jdbcType="VARCHAR" property="userPhone" />
		<result column="ENABLED" jdbcType="INTEGER" property="enabled" />
		<result column="IMAGE_PATH" jdbcType="VARCHAR" property="imagePath" />
		<result column="USER_UAV_IDS" jdbcType="VARCHAR" property="userUavIds" />
		<result column="USER_CARD_CODE" jdbcType="VARCHAR" property="userCardCode" />
		<result column="CUSCC" jdbcType="VARCHAR" property="cuscc" />
		<result column="LEGALPERSON_NAME" jdbcType="VARCHAR" property="legalPersonName" />
		<result column="BUSINESS_LICENSE" jdbcType="VARCHAR" property="businessLicense" />
		<result column="USER_EMAIL" jdbcType="VARCHAR" property="userEmail" />
		<result column="UNIT_ID" jdbcType="INTEGER" property="unitId" />
		
		<result column="USER_TYPE" jdbcType="INTEGER" property="userType" />
		<result column="DIS_NAME" jdbcType="VARCHAR" property="disName" />
		<result column="TYPE_NAME" jdbcType="VARCHAR" property="typeName" />
		<result column="USER_HEAD" jdbcType="VARCHAR" property="userHead" />
		<result column="CITY_NAME" jdbcType="VARCHAR" property="cityName" />
		<result column="PRO_NAME" jdbcType="VARCHAR" property="proName" />
	</resultMap>

	
	
	<!-- 首页 -->
	<select id="selectGraph" resultType="com.vt.fencing.model.AaNoflyZone">
	SELECT
		ZONE_ID AS zoneId,
		GRAPH AS Graph
	FROM
		TBL_NOFLY_ZONE
	</select>
	<select id="selectNoflyZone" parameterType="java.lang.Integer" resultType="com.vt.fencing.model.AaNoflyZone">
		SELECT
			ZONE_ID AS zoneId,
			GRAPH AS Graph,
			AREA_TYPE AS areaType			
		FROM
			TBL_NOFLY_ZONE
		WHERE
			ZONE_ID = #{zoneId}
	</select>
	


	<!-- 登录 -->
	<select id="selectByUserName" parameterType="java.lang.String"
		resultType="java.lang.Integer">
		select USER_ID from TBL_USER where
		USER_LOGIN_ACCOUNT=#{userLoginAccount,jdbcType=VARCHAR}
	</select>

	<select id="selectConPwd" parameterType="com.vt.fencing.model.AaUserLogin"
		resultMap="baseUserMap">
		SELECT
			A .*, B.DIS_NAME AS disName,
			C.TYPE_NAME AS typeName,
			D .CITY_NAME AS cityName,
			E .PRO_NAME AS proName
		FROM
			TBL_USER A
		LEFT JOIN T_DISTRICT B ON A .UNIT_ID = B.DIS_ID
		LEFT JOIN TBL_CARD_TYPE_DICT C ON A .USER_CARD_TYPE = C.TYPE_ID
		LEFT JOIN T_CITY D ON B.CITY_ID = D .CITY_ID
		LEFT JOIN T_PROVINCE E ON D .PRO_ID = E .PRO_ID
		WHERE
			USER_LOGIN_ACCOUNT = #{userLoginAccount,jdbcType=VARCHAR}
		AND USER_PWD = #{userPwd,jdbcType=VARCHAR}
	</select>
	
	<!-- 上传头像 -->
	<update id="updateUserHeadByUserId" parameterType="java.util.HashMap">
		UPDATE TBL_USER
		SET USER_HEAD = #{userHead}
		WHERE
			USER_ID = #{userId}
	</update>

	<!-- 忘记密码 -->
	<!-- 1. 验证用户名是否存在 -->
	<select id="selectUserLoginAccount" parameterType="com.vt.fencing.model.AaUserLogin"
		resultType="java.lang.Integer">
		select count(1) from TBL_USER WHERE
		USER_LOGIN_ACCOUNT = #{userLoginAccount}
	</select>
	<!-- 2. 更新密码 -->
	<update id="updateUserByUserLoginAccount" parameterType="com.vt.fencing.model.AaUserLogin">
		UPDATE
		TBL_USER
		set USER_PWD = #{userPwd} WHERE USER_Login_Account =
		#{userLoginAccount}
	</update>

	<!-- 注册 -->
	<!-- 验证手机号是否注册 -->
	<select id="selectUserMobilePhone" parameterType="java.lang.String" resultType="java.lang.Integer">
		SELECT
			CASE
		WHEN EXISTS (
			SELECT
				1
			FROM
				TBL_USER c
			WHERE
				c.USER_MOBILE_PHONE = #{userMobilePhone}
		) THEN
			1
		ELSE
			0
		END
		FROM
			dual
	</select>
	<!-- 个人注册 -->
	<insert id="insertUserPr" parameterType="com.vt.fencing.model.AaUserLogin">
		<selectKey keyProperty="userId" resultType="int" order="BEFORE">
			select nvl(max(USER_ID),0)+1 from TBL_USER
		</selectKey>
		INSERT INTO TBL_USER (
		USER_ID,
		USER_NAME,
		USER_CARD_TYPE,
		USER_CARD_CODE,
		USER_FSZH,
		USER_MOBILE_PHONE,
		USER_PWD,
		USER_SEX,
		ENABLED,
		USER_TYPE
		)
		VALUES
		(#{userId}, #{userName}, #{userCardType}, #{userCardCode},
		#{userFszh},
		#{userMobilePhone}, #{userPwd}, #{userSex}, #{enabled}, #{userType})
	</insert>
	<!-- 企业注册 -->
	<insert id="insertUserEr" parameterType="com.vt.fencing.model.AaUserLogin">
		<selectKey keyProperty="userId" resultType="int" order="BEFORE">
			select nvl(max(USER_ID),0)+1 from TBL_USER
		</selectKey>
		INSERT INTO TBL_USER (
		USER_ID,
		USER_NAME,
		USER_DEP,
		LEGALPERSON_NAME,
		CUSCC,
		USER_MOBILE_PHONE,
		USER_ADDRESS,
		USER_PWD,
		BUSINESS_LICENSE,
		USER_SEX,
		ENABLED,
		USER_CARD_CODE,
		USER_CARD_TYPE,
		USER_EMAIL,
		USER_TYPE
		)
		VALUES
		(#{userId},
		#{userName}, #{userDep},
		#{legalPersonName},
		#{cuscc},
		#{userMobilePhone}, #{userAddress},
		#{userPwd}, #{businessLicense},
		#{userSex}, #{enabled}, #{userCardCode}, #{userCardType},
		#{userEmail}, #{userType})
	</insert>
	<!-- 注册完成之后把手机号设置为登录名 -->
	<update id="updateUserLoginAccountForPhone" parameterType="java.util.HashMap">
		UPDATE TBL_USER
		SET USER_LOGIN_ACCOUNT = #{userLoginAccount}
		WHERE
			USER_MOBILE_PHONE = #{userMobilePhone}
	</update>
	
	


	<resultMap id="baseRouteMap" type="com.vt.fencing.model.AaRouteLog">
		<id column="ROUTE_ID" jdbcType="INTEGER" property="routeId" />
		<result column="UAV_ID" jdbcType="INTEGER" property="uavId" />
		<result column="USER_ID" jdbcType="INTEGER" property="userId" />
		<result column="START_TIME" jdbcType="DATE" property="startTime" />
		<result column="END_TIME" jdbcType="DATE" property="endTime" />
		<result column="START_GPS" jdbcType="VARCHAR" property="startGps" />
		<result column="END_GPS" jdbcType="VARCHAR" property="endGps" />
		<result column="MAX_HEIGHT_ID" jdbcType="INTEGER" property="maxHeightId" />
		<result column="ROUTE_TYPE_ID" jdbcType="INTEGER" property="routeTypeId" />
		<result column="APPROVAL_STATUS" jdbcType="INTEGER" property="approvalStatus" />
		<result column="ROUTE_DETAIL" jdbcType="VARCHAR" property="routeDetail" />
		<result column="STATUS" jdbcType="INTEGER" property="status" />
		<result column="ADD_TIME" jdbcType="DATE" property="addTime" />
		<result column="RECORD_FILE_PATH" jdbcType="VARCHAR" property="recordFilePath" />
		<result column="UNIT_ID" jdbcType="INTEGER" property="unitId" />
		<result column="AREA_TYPE_CODE" jdbcType="VARCHAR" property="areaTypeCode" />
		<result column="GRAPH" jdbcType="VARCHAR" property="graph" />
		<result column="ROUTE_UAV_UNIQUE_ID" jdbcType="VARCHAR"
			property="routeUavUniqueId" />
		<result column="ALERT_LEVEL" jdbcType="INTEGER" property="alertLevel" />
	</resultMap>


	<resultMap id="routeMap" type="com.vt.fencing.model.AaRouteLog"
		autoMapping="true">
		<result column="ROUTE_ID" jdbcType="INTEGER" property="routeId" />
		<result column="UAV_ID" jdbcType="INTEGER" property="uavId" />
		<result column="USER_ID" jdbcType="INTEGER" property="userId" />
		<result column="START_TIME" jdbcType="DATE" property="startTime" />
		<result column="END_TIME" jdbcType="DATE" property="endTime" />
		<result column="START_GPS" jdbcType="VARCHAR" property="startGps" />
		<result column="END_GPS" jdbcType="VARCHAR" property="endGps" />
		<result column="MAX_HEIGHT_ID" jdbcType="INTEGER" property="maxHeightId" />
		<result column="ROUTE_TYPE_ID" jdbcType="INTEGER" property="routeTypeId" />
		<result column="APPROVAL_STATUS" jdbcType="INTEGER" property="approvalStatus" />
		<result column="ROUTE_DETAIL" jdbcType="VARCHAR" property="routeDetail" />
		<result column="STATUS" jdbcType="INTEGER" property="status" />
		<result column="ADD_TIME" jdbcType="DATE" property="addTime" />
		<result column="RECORD_FILE_PATH" jdbcType="VARCHAR" property="recordFilePath" />
		<result column="UNIT_ID" jdbcType="INTEGER" property="unitId" />
		<result column="AREA_TYPE_CODE" jdbcType="VARCHAR" property="areaTypeCode" />
		<result column="GRAPH" jdbcType="VARCHAR" property="graph" />
		<result column="ROUTE_UAV_UNIQUE_ID" jdbcType="VARCHAR"
			property="routeUavUniqueId" />
		<result column="ALERT_LEVEL" jdbcType="INTEGER" property="alertLevel" />

		<collection property="uav" ofType="com.vt.fencing.model.AaUav">
			<result column="UAV_ID" property="uavId" />
			<result column="UAV_CLASS_ID" property="uavClassId" />
			<result column="UAV_BRAND" property="uavBrand" />
			<result column="STATUS_ID" property="statusId" />
			<result column="UAV_TYPE" property="uavType" />
			<result column="UAV_AXLE_DISTANCE" property="uavAxleDistance" />
			<result column="UAV_PROPELLER_LENGTH" property="uavPropellerLength" />
			<result column="WORKING_LOAD_ID" property="workingLoadId" />
			<result column="MADE_DATE" property="madeDate" />
			<result column="VALID_DATE" property="validDate" />
			<result column="UAV_UNIQUE_ID" property="uavUniqueId" />
			<result column="IMAGE_PATH" property="imagePath" />
			<result column="ENABLED" property="enabled" />
			<result column="USER_ID" property="userId" />
			<result column="IMEI" property="imei" />
			<result column="ADD_TIME" property="addTime" />
		</collection>

		<collection property="heightScopeDict"
			ofType="com.vt.fencing.model.AaHeightScopeDict">
			<result column="MAX_HEIGHT_NAME" property="maxHeightName" />
			<result column="MAX_HEIGHT_DESC" property="maxHeightDesc" />
			<result column="MAX_HEIGHT_ID" property="maxHeightId" />
		</collection>
	</resultMap>

	<!-- 飞行记录 -->
	<select id="selectCount" parameterType="java.lang.Integer" resultType="java.lang.Integer">
		SELECT
			COUNT (1)
		FROM
			(
				SELECT
					A .START_TIME AS startTime,
					A .GRAPH AS graph,
					A .END_TIME AS endTime,
					A .ROUTE_ID AS routeId,
					b.IMAGE_PATH AS imagePath,
					c.MAX_HEIGHT_NAME AS maxHeightName
				FROM
					TBL_ROUTE A
				LEFT JOIN TBL_UAV b ON A .UAV_ID = b.UAV_ID
				LEFT JOIN TBL_HEIGHT_SCOPE_DICT c ON A .MAX_HEIGHT_ID = c.MAX_HEIGHT_ID
				WHERE
					A .USER_ID = #{userId} AND A.STATUS = 2
			)
	</select>
	<select id="selectItemList" parameterType="java.util.HashMap"
		resultType="com.vt.fencing.model.vo.LogPojo">
		SELECT
			*
		FROM
			(
				SELECT
					AA.*, ROWNUM rn
				FROM
					(
						SELECT
							A .START_TIME AS startTime,
							A .GRAPH AS graph,
							A .END_TIME AS endTime,
							A .ROUTE_ID AS routeId,
							b.IMAGE_PATH AS imagePath,
							c.MAX_HEIGHT_NAME AS maxHeightName,
							D .unit_name AS unitName
						FROM
							TBL_ROUTE A
						LEFT JOIN TBL_UAV b ON A .UAV_ID = b.UAV_ID
						LEFT JOIN TBL_HEIGHT_SCOPE_DICT c ON A .MAX_HEIGHT_ID = c.MAX_HEIGHT_ID
						LEFT JOIN TBL_CITY_DICT D ON A .unit_id = D .unit_id
						WHERE
							A .USER_ID = #{userId} AND A.STATUS = 2
					) AA
				WHERE
					ROWNUM &lt;= #{rows}
			)
		WHERE
			RN >= #{page}
	</select>

	<!-- 飞行记录详情 -->
	<select id="selectLogDetail" parameterType="java.lang.Integer"
		resultType="com.vt.fencing.model.vo.LogPojo">
		SELECT
			A .START_TIME AS startTime,
			A .END_TIME AS endTime,
			A .ROUTE_ID AS routeId,
			b.IMAGE_PATH AS imagePath,
			c.MAX_HEIGHT_NAME AS maxHeightName,
			D .unit_name AS unitName,
			E .GRAPH AS graph
		FROM
			TBL_ROUTE A
		LEFT JOIN TBL_UAV b ON A .UAV_ID = b.UAV_ID
		LEFT JOIN TBL_HEIGHT_SCOPE_DICT c ON A .MAX_HEIGHT_ID = c.MAX_HEIGHT_ID
		LEFT JOIN TBL_CITY_DICT D ON A .unit_id = D .unit_id
		LEFT JOIN TBL_NOFLY_ZONE E ON A .unit_id = E .unit_id
		WHERE
			A .ROUTE_ID = #{routeId}
	</select>
	<!-- 飞行轨迹 路径详情 -->
	<select id="selectFlyTrail" parameterType="java.lang.Integer" resultType="com.vt.fencing.model.AaUavStatusHis">
		SELECT
			UAV_GPS_LAT AS uavGpsLat,
			UAV_GPS_LON AS uavGpsLon,
			IN_NOFLYING_ZONE AS inNoflyingZone
		FROM
			TBL_UAV_STATUS_HIS 
		WHERE
			ROUTE_ID = #{routeId}
	</select>


	<!-- 省市区 -->
	<!-- 获取所有的省份 -->
	<select id="selectAllProvince" resultType="com.vt.fencing.model.vo.Province">
		SELECT
			PRO_ID AS proId,
			PRO_NAME AS proName
		FROM
			T_PROVINCE
	</select>
	<!-- 根据pro_id获取相应的城市 -->
	<select id="selectCityByProId" parameterType="java.lang.Integer" resultType="com.vt.fencing.model.vo.City">
		SELECT
			CITY_ID AS cityId,
			CITY_NAME cityName
		FROM
			T_CITY
		WHERE
			PRO_ID = #{proId}
	</select>
	<select id="selectDistrictByCityId" parameterType="java.lang.Integer" resultType="com.vt.fencing.model.vo.District">
		SELECT
			DIS_ID AS disId,
			DIS_NAME AS disName
		FROM
			T_DISTRICT
		WHERE
			CITY_ID = #{cityId}
	</select>
	<!-- 无人机名称和任务类型 --> 
	<select id="selectUavName" resultType="com.vt.fencing.model.vo.UavResponse">
		SELECT
			A.UAV_ID AS uavId,
			A.UAV_NAME AS uavName,
			A.IMEI AS imei
		FROM
			TBL_UAV A
		WHERE
			A.USER_ID = #{userId} AND A.ENABLED = 1
	</select>
	<select id="selectTaskType" resultType="com.vt.fencing.model.vo.TaskTypeResponse">
		SELECT
			ROUTE_TYPE_ID AS routeTypeId,
			ROUTE_TYPE_NAME AS routeTypeName
		FROM
			TBL_ROUTE_TYPE_DICT
	</select>
	<!--  -->
	<select id="selectMaxHeight" resultType="java.util.Map">
		SELECT
			MAX_HEIGHT_ID AS maxHeightId,
			MAX_HEIGHT_NAME AS maxHeightName
		FROM
			TBL_HEIGHT_SCOPE_DICT
	</select>
	<!-- 立即申请 -->
	<insert id="insertRoute" parameterType="com.vt.fencing.model.AaRouteLog">
		<selectKey keyProperty="routeId" resultType="int" order="BEFORE">
			select nvl(max(ROUTE_ID),0)+1 from TBL_ROUTE
		</selectKey>
		INSERT INTO TBL_ROUTE (
		ROUTE_ID,
		USER_ID,
		UAV_ID,
		GRAPH,
		START_TIME,
		END_TIME,
		MAX_HEIGHT_ID,
		ROUTE_TYPE_ID,
		START_GPS,
		END_GPS,
		ROUTE_UAV_UNIQUE_ID,
		FLYER_NAME,
		STATUS,
		APPROVAL_STATUS
		)
		VALUES
		(#{routeId}, #{userId}, #{uavId},
		#{graph},
		#{startTime}, #{endTime}, #{maxHeightId}, #{routeTypeId},
		#{startGps},
		#{endGps}, #{routeUavUniqueId}, #{flyerName}, #{status}, #{approvalStatus})
	</insert>


	<!-- 消息列表 -->
	<select id="selectInfoCount" parameterType="java.lang.Integer" resultType="java.lang.Integer">
		SELECT
			COUNT (1)
		FROM
			(
				SELECT
							b.Type_name AS typeName,
							A .ADD_TIME AS addTime,
							A .INFO_CONTENT AS infoContent,
							A .INFO_ID AS infoId
						FROM
							TBL_INFORMATION A
						LEFT JOIN TBL_INFO_TYPE b ON A .INFO_TYPE = b.TYPE_ID
						WHERE
							A .USER_ID = #{userId}
			)
	</select>
	<select id="selectInfomationList" parameterType="java.util.HashMap"
		resultType="com.vt.fencing.model.vo.InformationResult">
		SELECT
			*
		FROM
			(
				SELECT
					AA.*, ROWNUM rn
				FROM
					(
						SELECT
							b.Type_name AS typeName,
							A .ADD_TIME AS addTime,
							A .INFO_CONTENT AS infoContent,
							A .INFO_ID AS infoId,
							A.INFO_TYPE as infoType
						FROM
							TBL_INFORMATION A
						LEFT JOIN TBL_INFO_TYPE b ON A .INFO_TYPE = b.TYPE_ID
						WHERE
							A .USER_ID = #{userId}
					) AA
				WHERE
					ROWNUM &lt;= #{rows}
			)
		WHERE
			RN >= #{page}
	</select>

	<!-- 消息详情 -->
	<select id="selectInfomation" parameterType="java.lang.Integer"
		resultType="com.vt.fencing.model.vo.InformationResult">
		SELECT
		b.Type_name AS typeName,
		A.ADD_TIME AS addTime,
		A.INFO_CONTENT AS infoContent,
		A.INFO_ID AS infoId,
		A.INFO_TYPE as infoType
		FROM
		TBL_INFORMATION A
		LEFT JOIN TBL_INFO_TYPE b ON A .INFO_TYPE = b.TYPE_ID
		WHERE INFO_ID =
		#{infoId}
	</select>


	<!-- 点击进入个人信息展示 -->
	<select id="selectPersonalInfo" parameterType="java.lang.Integer"
		resultMap="baseUserMap" >
		SELECT
			A .*, B.DIS_NAME AS disName,
			C.TYPE_NAME AS typeName,
			D .CITY_NAME AS cityName,
			E .PRO_NAME AS proName
		FROM
			TBL_USER A
		LEFT JOIN T_DISTRICT B ON A .UNIT_ID = B.DIS_ID
		LEFT JOIN TBL_CARD_TYPE_DICT C ON A .USER_CARD_TYPE = C.TYPE_ID
		LEFT JOIN T_CITY D ON B.CITY_ID = D .CITY_ID
		LEFT JOIN T_PROVINCE E ON D .PRO_ID = E .PRO_ID
		WHERE
			A.USER_ID = #{userId}
	</select>
	<!-- 编辑保存 用户个人信息 -->
	<update id="updatePersonalInfo" parameterType="com.vt.fencing.model.AaUserLogin">
		UPDATE 
			TBL_USER
		SET 
			<if test="unitId != -1">
				UNIT_ID = #{unitId},
			</if>
			USER_ADDRESS = #{userAddress},
			USER_DEP = #{userDep},
			USER_EMAIL = #{userEmail},
			IMAGE_PATH = #{imagePath}
		WHERE
			USER_ID = #{userId}
	</update>
	<!-- 编辑保存企业信息 -->
	<update id="updateEnterpriseInfo" parameterType="com.vt.fencing.model.AaUserLogin">
		UPDATE TBL_USER
			SET USER_EMAIL = #{userEmail,jdbcType=VARCHAR},
			USER_ADDRESS = #{userAddress,jdbcType=VARCHAR},
			BUSINESS_LICENSE = #{businessLicense,jdbcType=VARCHAR}
		WHERE 
			USER_ID = #{userId,jdbcType=INTEGER}
	</update>




	<resultMap id="SfMap" type="com.vt.fencing.model.AaUavShenFei"
		autoMapping="true">
		<result column="ROUTE_ID" jdbcType="INTEGER" property="routeId" />
		<result column="UAV_ID" jdbcType="INTEGER" property="uavId" />
		<result column="USER_ID" jdbcType="INTEGER" property="userId" />
		<result column="START_TIME" jdbcType="DATE" property="startTime" />
		<result column="END_TIME" jdbcType="DATE" property="endTime" />
		<result column="START_GPS" jdbcType="VARCHAR" property="startGps" />
		<result column="END_GPS" jdbcType="VARCHAR" property="endGps" />
		<result column="MAX_HEIGHT_ID" jdbcType="INTEGER" property="maxHeightId" />
		<result column="ROUTE_TYPE_ID" jdbcType="INTEGER" property="routeTypeId" />
		<result column="APPROVAL_STATUS" jdbcType="INTEGER" property="approvalStatus" />
		<result column="ROUTE_DETAIL" jdbcType="VARCHAR" property="routeDetail" />
		<result column="STATUS" jdbcType="INTEGER" property="status" />
		<result column="ADD_TIME" jdbcType="DATE" property="addTime" />
		<result column="RECORD_FILE_PATH" jdbcType="VARCHAR" property="recordFilePath" />
		<result column="UNIT_ID" jdbcType="INTEGER" property="unitId" />
		<result column="AREA_TYPE_CODE" jdbcType="VARCHAR" property="areaTypeCode" />
		<result column="GRAPH" jdbcType="VARCHAR" property="graph" />
		<result column="ROUTE_UAV_UNIQUE_ID" jdbcType="VARCHAR"
			property="routeUavUniqueId" />
		<result column="ALERT_LEVEL" jdbcType="INTEGER" property="alertLevel" />

		<result column="UAV_CLASS_ID" property="uavClassId" />
		<result column="UAV_BRAND" property="uavBrand" />
		<result column="STATUS_ID" property="statusId" />
		<result column="UAV_TYPE" property="uavType" />
		<result column="UAV_AXLE_DISTANCE" property="uavAxleDistance" />
		<result column="UAV_PROPELLER_LENGTH" property="uavPropellerLength" />
		<result column="WORKING_LOAD_ID" property="workingLoadId" />
		<result column="MADE_DATE" property="madeDate" />
		<result column="VALID_DATE" property="validDate" />
		<result column="UAV_UNIQUE_ID" property="uavUniqueId" />
		<result column="IMAGE_PATH" property="imagePath" />
		<result column="ENABLED" property="enabled" />
		<result column="IMEI" property="imei" />

		<result column="STATUS_NAME" property="statusName" />
		<result column="STATUS_DESC" property="statusDesc" />
	</resultMap>


	<!-- 无人机列表 -->
	<!-- 1.无人机总数 -->
	<select id="selectCountUav" resultType="java.lang.Integer">
		select count(*) from
		TBL_UAV
	</select>
	<!-- 2.无人机信息列表 -->
	<select id="selectUavList" parameterType="java.lang.Integer"
		resultType="com.vt.fencing.model.vo.UavResult">
		SELECT
			A.IMAGE_PATH AS imagePath,
			A.UAV_TYPE AS uavType,
			b.BRAND_NAME AS brandName,
			c.STATUS_NAME AS statusName,
			A.UAV_ID as uavId
		FROM
			TBL_UAV A
		LEFT JOIN TBL_BRAND_DICT b ON A .UAV_BRAND = b.BRAND_ID
		LEFT JOIN TBL_UAV_STATUS_DICT c ON A .STATUS_ID = c.STATUS_ID
		WHERE A.USER_ID = #{userId} AND A.ENABLED = 1
	</select>
	
	<!-- 类型、品牌、型号 -->
	<select id="selectUavTypeList" resultType="com.vt.fencing.model.vo.UavTypeResponse">
		SELECT
			UAV_CLASS_ID AS uavClassId,
			UAV_CLASS_DESC AS uavClassDesc
		FROM
			TBL_UAV_CLASS_DICT
	</select>
	<select id="selectBrandList" resultType="com.vt.fencing.model.vo.BrandResponse">
		SELECT BRAND_ID AS brandId, BRAND_NAME AS brandName  
		from TBL_BRAND_DICT
	</select>
	<select id="selectWokingLoadList" resultType="com.vt.fencing.model.vo.WorkingLoadResponse">
		SELECT
			WORKING_LOAD_ID AS workingLoadId,
			WORKING_LOAD_DESC AS workingLoadDesc
		FROM
			TBL_WORKING_LOAD_DICT
	</select>
	
	
	<!--添加无人机 -->
	<insert id="createUav" parameterType="com.vt.fencing.model.AaUav">
		<selectKey keyProperty="uavId" resultType="int" order="BEFORE">
			select nvl(max(UAV_ID),0)+1 from TBL_UAV
		</selectKey>
		INSERT INTO TBL_UAV (
		UAV_ID,
		IMAGE_PATH,
		UAV_CLASS_ID,
		UAV_BRAND,
		UAV_TYPE,
		MADE_DATE,
		VALID_DATE,
		UAV_UNIQUE_ID,
		WORKING_LOAD_ID,
		USER_ID,
		UAV_NAME
		)
		VALUES
		(#{uavId},#{imagePath},#{uavClassId},#{uavBrand},#{uavType},
		#{madeDate},#{validDate},#{uavUniqueId},#{workingLoadId},#{userId},#{uavName})
	</insert>


	<!-- 违规飞行条数查询 -->
	<select id="queryCountRoute" parameterType="com.vt.fencing.model.vo.PagingParameters"
		resultType="java.lang.Integer">
		SELECT
			COUNT (1)
		FROM
			TBL_ROUTE A
		LEFT JOIN TBL_IRREGULARITIES b ON A .ALERT_LEVEL = b.ALERT_LEVEL
		WHERE
			A .USER_ID = #{userId}
		AND b.ALERT_LEVEL &lt;&gt; 0
	</select>
	
	<resultMap id="WeiguiMap" type="com.vt.fencing.model.AaIrregularities">
		<!-- <id column="ALERT_LEVEL" jdbcType="INTEGER" property="alertLevel" /> -->
		<result column="RULE_TITLE" jdbcType="VARCHAR" property="ruleTitle" />
		<result column="RULE_CONTENT" jdbcType="VARCHAR" property="ruleContent" />
		<result column="RULE_DATE" jdbcType="DATE" property="ruleDate" />
	</resultMap>
	
	<!-- 违规飞行查询 -->
	<select id="getRouteList" parameterType="java.util.HashMap"
		resultMap="WeiguiMap">
		SELECT
		*
		FROM
		(
		SELECT
		AA.*, ROWNUM rn
		FROM
		(
			SELECT
					B.RULE_TITLE as ruleTitle,
					B.RULE_DATE as ruleDate,
					B.RULE_CONTENT as ruleContent
				FROM
					TBL_ROUTE A
				LEFT JOIN TBL_IRREGULARITIES b ON A .ALERT_LEVEL = b.ALERT_LEVEL
				WHERE A.USER_ID = #{userId} AND b.ALERT_LEVEL &lt;&gt; 0
		) AA
		WHERE
		ROWNUM &lt;= #{rows})
		WHERE
		RN >= #{page}
	</select>


	<!--无人机详情 -->
	<select id="getUavMessageList" parameterType="java.lang.Integer"
		resultType="com.vt.fencing.model.vo.UavDetailResult">
		SELECT 
			A .UAV_TYPE AS uavType,
			A .UAV_AXLE_DISTANCE AS uavAxleDistance,
			A .UAV_PROPELLER_LENGTH AS uavPropellerLength,
			A .WORKING_LOAD_ID AS workingLoadId,
			c.WORKING_LOAD_DESC AS workingLoadDesc,
			A .MADE_DATE AS madeDate,
			A .UAV_UNIQUE_ID AS uavUniqueId,
			b.UAV_APPLICATION AS uavApplicatton,
			d.UAV_STRUCTURE AS uavStructure,
			e.STATUS_NAME AS statusName,
			f.BRAND_NAME AS brandName,
			A.IMAGE_PATH AS imagePath,
			A.UAV_NAME AS uavName
		FROM
			TBL_UAV A
		LEFT JOIN TBL_UAV_CLASS_DICT b ON A .UAV_CLASS_ID = b.UAV_CLASS_ID
		LEFT JOIN TBL_WORKING_LOAD_DICT c ON A .WORKING_LOAD_ID = c.WORKING_LOAD_ID
		LEFT JOIN TBL_UAV_CLASS_DICT d ON A.UAV_CLASS_ID = d.UAV_CLASS_ID
		LEFT JOIN TBL_UAV_STATUS_DICT e ON A.STATUS_ID = e.STATUS_ID
		LEFT JOIN TBL_BRAND_DICT f ON A.UAV_BRAND = f.BRAND_ID
		WHERE
			A .UAV_ID = #{uavId}
	</select>
	
	<!-- 注销无人机 -->
	<update id="updateUavMessage" parameterType="java.lang.Integer">
		UPDATE TBL_UAV SET ENABLED = 0 WHERE UAV_ID = #{uavId}
	</update>
	
	<!--我的申飞 -->
	<!-- 1. 总条数 -->
	<select id="selectCountShenFei" parameterType="java.util.HashMap" resultType="java.lang.Integer">
		SELECT
			COUNT (1)
		FROM
			(
				SELECT
					A .IMAGE_PATH AS imagePath,
					A .UAV_BRAND AS uavBrand,
					A .UAV_TYPE AS uavType,
					b.UNIT_ID AS unitId,
					b.START_TIME AS startTime,
					b.MAX_HEIGHT_ID AS maxHeightId,
					c.STATUS_NAME AS statusName
				FROM
					TBL_UAV A
				LEFT JOIN TBL_ROUTE b ON A .UAV_ID = b.uav_ID
				LEFT JOIN TBL_ROUTE_APPROVAL_STATUS_DICT c ON b.APPROVAL_STATUS = c.STATUS_ID
				WHERE
					c.STATUS_ID = #{statusId}
				AND b.USER_ID = #{userId} AND b.STATUS = 0
			)
	</select>
	<!-- 2. 内容 -->
	<select id="getUavShenFeiList" parameterType="java.util.HashMap"
		resultType="com.vt.fencing.model.vo.ShenFeiResult">
		SELECT
				*
		FROM
			(
				SELECT
					AA.*, ROWNUM rn
				FROM
					(
						SELECT
							A.IMAGE_PATH AS imagePath,
							f.BRAND_NAME AS brandName,
							A.UAV_TYPE AS uavType,
							e.UNIT_NAME AS unitName,
							b.START_TIME AS startTime,
							d.MAX_HEIGHT_NAME AS maxHeightName,
							c.STATUS_NAME AS statusName,
							b.END_TIME AS endTime
						FROM
							TBL_UAV A
						LEFT JOIN TBL_ROUTE b ON A .UAV_ID = b.uav_ID
						LEFT JOIN TBL_ROUTE_APPROVAL_STATUS_DICT c ON b.APPROVAL_STATUS = c.STATUS_ID
						LEFT JOIN TBL_HEIGHT_SCOPE_DICT d ON b.MAX_HEIGHT_ID = d.MAX_HEIGHT_ID
						LEFT JOIN TBL_CITY_DICT e ON b.UNIT_ID = e.UNIT_ID
						LEFT JOIN TBL_BRAND_DICT f ON a.UAV_BRAND = f.BRAND_ID
						WHERE
							c.STATUS_ID = #{statusId,jdbcType=INTEGER}
						AND b.USER_ID = #{userId,jdbcType=INTEGER} AND b.STATUS = 0
					) AA
				WHERE
					ROWNUM &lt;= #{rows}
			)
		WHERE
			rn >= #{page}
	</select>
	<!-- 
	<select id="getUavShenFeiList" parameterType="com.vt.fencing.model.AaUavShenFei"
		resultMap="SfMap">
		SELECT
		*
		FROM
		TBL_UAV A
		LEFT JOIN TBL_ROUTE b ON A .UAV_ID =
		b.uav_ID
		LEFT JOIN TBL_ROUTE_APPROVAL_STATUS_DICT c ON
		b.APPROVAL_STATUS =
		c.STATUS_ID
		WHERE
		c.STATUS_ID
		=#{statusId,jdbcType=INTEGER} AND
		b.USER_ID=#{userId,jdbcType=INTEGER}
	</select>
	 -->



	<!--查询用户名和密码 -->
	<select id="selectPwd" parameterType="com.vt.fencing.model.AaUserLogin"
		resultType="java.lang.Integer">
		SELECT count(1) FROM TBL_USER WHERE
		USER_LOGIN_ACCOUNT=#{userLoginAccount} AND USER_PWD=#{userPwd}
	</select>

	<!-- 修改密码 -->
	<update id="updatePwd" parameterType="com.vt.fencing.model.AaUserLogin">
		UPDATE TBL_USER
		set USER_PWD
		= #{userPwd} WHERE USER_LOGIN_ACCOUNT = #{userLoginAccount}
	</update>
</mapper>






