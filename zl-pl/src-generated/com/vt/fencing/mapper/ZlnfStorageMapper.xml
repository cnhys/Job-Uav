<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.vt.fencing.client.ZlnfStorageMapper" >
  <resultMap id="BaseResultMap" type="com.vt.fencing.model.ZlnfStorage" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 16:54:24 CST 2017.
    -->
    <id column="ID" property="id" jdbcType="DECIMAL" />
    <result column="RKID" property="rkid" jdbcType="VARCHAR" />
    <result column="HTID" property="htid" jdbcType="VARCHAR" />
    <result column="XYID" property="xyid" jdbcType="VARCHAR" />
    <result column="CREATEDATE" property="createdate" jdbcType="DATE" />
    <result column="CLNAME" property="clname" jdbcType="VARCHAR" />
    <result column="USERID" property="userid" jdbcType="VARCHAR" />
    <result column="PHONE" property="phone" jdbcType="VARCHAR" />
    <result column="IDNUMBER" property="idnumber" jdbcType="VARCHAR" />
    <result column="LIBNAME" property="libname" jdbcType="VARCHAR" />
    <result column="LIBID" property="libid" jdbcType="VARCHAR" />
    <result column="VARIETY" property="variety" jdbcType="VARCHAR" />
    <result column="HTLEVEL" property="htlevel" jdbcType="VARCHAR" />
    <result column="GLSHUIFEN" property="glshuifen" jdbcType="VARCHAR" />
    <result column="CNT" property="cnt" jdbcType="VARCHAR" />
    <result column="PRICE" property="price" jdbcType="VARCHAR" />
    <result column="ACTIONSTATE" property="actionstate" jdbcType="VARCHAR" />
    <result column="RETURNSTATE" property="returnstate" jdbcType="VARCHAR" />
    <result column="SETTLEMENTSTATE" property="settlementstate" jdbcType="VARCHAR" />
    <result column="VARIETYCODE" property="varietycode" jdbcType="VARCHAR" />
    <result column="HTLEVELCODE" property="htlevelcode" jdbcType="VARCHAR" />
    <result column="ISDELETE" property="isdelete" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 16:54:24 CST 2017.
    -->
    <where >
      <foreach collection="oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 16:54:24 CST 2017.
    -->
    ID, RKID, HTID, XYID, CREATEDATE, CLNAME, USERID, PHONE, IDNUMBER, LIBNAME, LIBID, 
    VARIETY, HTLEVEL, GLSHUIFEN, CNT, PRICE, ACTIONSTATE, RETURNSTATE, SETTLEMENTSTATE, 
    VARIETYCODE, HTLEVELCODE, ISDELETE
  </sql>
  <select id="selectByExample" resultMap="BaseResultMap" parameterType="com.vt.fencing.model.ZlnfStorageExample" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 16:54:24 CST 2017.
    -->
    select
    <if test="distinct" >
      distinct
    </if>
    <include refid="Base_Column_List" />
    from ZLNF_STORAGE
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null" >
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 16:54:24 CST 2017.
    -->
    select 
    <include refid="Base_Column_List" />
    from ZLNF_STORAGE
    where ID = #{id,jdbcType=DECIMAL}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 16:54:24 CST 2017.
    -->
    delete from ZLNF_STORAGE
    where ID = #{id,jdbcType=DECIMAL}
  </delete>
  <insert id="insert" parameterType="com.vt.fencing.model.ZlnfStorage" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 16:54:24 CST 2017.
    -->
    insert into ZLNF_STORAGE (ID, RKID, HTID, 
      XYID, CREATEDATE, CLNAME, 
      USERID, PHONE, IDNUMBER, 
      LIBNAME, LIBID, VARIETY, 
      HTLEVEL, GLSHUIFEN, CNT, 
      PRICE, ACTIONSTATE, RETURNSTATE, 
      SETTLEMENTSTATE, VARIETYCODE, HTLEVELCODE, 
      ISDELETE)
    values (SEQ_ZLNF_STORAGE.Nextval, #{rkid,jdbcType=VARCHAR}, #{htid,jdbcType=VARCHAR}, 
      #{xyid,jdbcType=VARCHAR}, #{createdate}, #{clname,jdbcType=VARCHAR}, 
      #{userid,jdbcType=VARCHAR}, #{phone,jdbcType=VARCHAR}, #{idnumber,jdbcType=VARCHAR}, 
      #{libname,jdbcType=VARCHAR}, #{libid,jdbcType=VARCHAR}, #{variety,jdbcType=VARCHAR}, 
      #{htlevel,jdbcType=VARCHAR}, #{glshuifen,jdbcType=VARCHAR}, #{cnt,jdbcType=VARCHAR}, 
      #{price,jdbcType=VARCHAR}, #{actionstate,jdbcType=VARCHAR}, #{returnstate,jdbcType=VARCHAR}, 
      #{settlementstate,jdbcType=VARCHAR}, #{varietycode,jdbcType=VARCHAR}, #{htlevelcode,jdbcType=VARCHAR}, 
      #{isdelete,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.vt.fencing.model.ZlnfStorage" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 16:54:24 CST 2017.
    -->
    insert into ZLNF_STORAGE
    <trim prefix="(" suffix=")" suffixOverrides="," >
        ID,
      <if test="rkid != null" >
        RKID,
      </if>
      <if test="htid != null" >
        HTID,
      </if>
      <if test="xyid != null" >
        XYID,
      </if>
      <if test="createdate != null" >
        CREATEDATE,
      </if>
      <if test="clname != null" >
        CLNAME,
      </if>
      <if test="userid != null" >
        USERID,
      </if>
      <if test="phone != null" >
        PHONE,
      </if>
      <if test="idnumber != null" >
        IDNUMBER,
      </if>
      <if test="libname != null" >
        LIBNAME,
      </if>
      <if test="libid != null" >
        LIBID,
      </if>
      <if test="variety != null" >
        VARIETY,
      </if>
      <if test="htlevel != null" >
        HTLEVEL,
      </if>
      <if test="glshuifen != null" >
        GLSHUIFEN,
      </if>
      <if test="cnt != null" >
        CNT,
      </if>
      <if test="price != null" >
        PRICE,
      </if>
      <if test="actionstate != null" >
        ACTIONSTATE,
      </if>
      <if test="returnstate != null" >
        RETURNSTATE,
      </if>
      <if test="settlementstate != null" >
        SETTLEMENTSTATE,
      </if>
      <if test="varietycode != null" >
        VARIETYCODE,
      </if>
      <if test="htlevelcode != null" >
        HTLEVELCODE,
      </if>
      <if test="isdelete != null" >
        ISDELETE,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
        SEQ_ZLNF_STORAGE.Nextval,
      <if test="rkid != null" >
        #{rkid,jdbcType=VARCHAR},
      </if>
      <if test="htid != null" >
        #{htid,jdbcType=VARCHAR},
      </if>
      <if test="xyid != null" >
        #{xyid,jdbcType=VARCHAR},
      </if>
      <if test="createdate != null" >
        #{createdate},
      </if>
      <if test="clname != null" >
        #{clname,jdbcType=VARCHAR},
      </if>
      <if test="userid != null" >
        #{userid,jdbcType=VARCHAR},
      </if>
      <if test="phone != null" >
        #{phone,jdbcType=VARCHAR},
      </if>
      <if test="idnumber != null" >
        #{idnumber,jdbcType=VARCHAR},
      </if>
      <if test="libname != null" >
        #{libname,jdbcType=VARCHAR},
      </if>
      <if test="libid != null" >
        #{libid,jdbcType=VARCHAR},
      </if>
      <if test="variety != null" >
        #{variety,jdbcType=VARCHAR},
      </if>
      <if test="htlevel != null" >
        #{htlevel,jdbcType=VARCHAR},
      </if>
      <if test="glshuifen != null" >
        #{glshuifen,jdbcType=VARCHAR},
      </if>
      <if test="cnt != null" >
        #{cnt,jdbcType=VARCHAR},
      </if>
      <if test="price != null" >
        #{price,jdbcType=VARCHAR},
      </if>
      <if test="actionstate != null" >
        #{actionstate,jdbcType=VARCHAR},
      </if>
      <if test="returnstate != null" >
        #{returnstate,jdbcType=VARCHAR},
      </if>
      <if test="settlementstate != null" >
        #{settlementstate,jdbcType=VARCHAR},
      </if>
      <if test="varietycode != null" >
        #{varietycode,jdbcType=VARCHAR},
      </if>
      <if test="htlevelcode != null" >
        #{htlevelcode,jdbcType=VARCHAR},
      </if>
      <if test="isdelete != null" >
        #{isdelete,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.vt.fencing.model.ZlnfStorageExample" resultType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 16:54:24 CST 2017.
    -->
    select count(*) from ZLNF_STORAGE
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByPrimaryKeySelective" parameterType="com.vt.fencing.model.ZlnfStorage" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 16:54:24 CST 2017.
    -->
    update ZLNF_STORAGE
    <set >
      <if test="rkid != null" >
        RKID = #{rkid,jdbcType=VARCHAR},
      </if>
      <if test="htid != null" >
        HTID = #{htid,jdbcType=VARCHAR},
      </if>
      <if test="xyid != null" >
        XYID = #{xyid,jdbcType=VARCHAR},
      </if>
      <if test="createdate != null" >
        CREATEDATE = #{createdate},
      </if>
      <if test="clname != null" >
        CLNAME = #{clname,jdbcType=VARCHAR},
      </if>
      <if test="userid != null" >
        USERID = #{userid,jdbcType=VARCHAR},
      </if>
      <if test="phone != null" >
        PHONE = #{phone,jdbcType=VARCHAR},
      </if>
      <if test="idnumber != null" >
        IDNUMBER = #{idnumber,jdbcType=VARCHAR},
      </if>
      <if test="libname != null" >
        LIBNAME = #{libname,jdbcType=VARCHAR},
      </if>
      <if test="libid != null" >
        LIBID = #{libid,jdbcType=VARCHAR},
      </if>
      <if test="variety != null" >
        VARIETY = #{variety,jdbcType=VARCHAR},
      </if>
      <if test="htlevel != null" >
        HTLEVEL = #{htlevel,jdbcType=VARCHAR},
      </if>
      <if test="glshuifen != null" >
        GLSHUIFEN = #{glshuifen,jdbcType=VARCHAR},
      </if>
      <if test="cnt != null" >
        CNT = #{cnt,jdbcType=VARCHAR},
      </if>
      <if test="price != null" >
        PRICE = #{price,jdbcType=VARCHAR},
      </if>
      <if test="actionstate != null" >
        ACTIONSTATE = #{actionstate,jdbcType=VARCHAR},
      </if>
      <if test="returnstate != null" >
        RETURNSTATE = #{returnstate,jdbcType=VARCHAR},
      </if>
      <if test="settlementstate != null" >
        SETTLEMENTSTATE = #{settlementstate,jdbcType=VARCHAR},
      </if>
      <if test="varietycode != null" >
        VARIETYCODE = #{varietycode,jdbcType=VARCHAR},
      </if>
      <if test="htlevelcode != null" >
        HTLEVELCODE = #{htlevelcode,jdbcType=VARCHAR},
      </if>
      <if test="isdelete != null" >
        ISDELETE = #{isdelete,jdbcType=VARCHAR},
      </if>
    </set>
    where ID = #{id,jdbcType=DECIMAL}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.vt.fencing.model.ZlnfStorage" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 16:54:24 CST 2017.
    -->
    update ZLNF_STORAGE
    set RKID = #{rkid,jdbcType=VARCHAR},
      HTID = #{htid,jdbcType=VARCHAR},
      XYID = #{xyid,jdbcType=VARCHAR},
      CREATEDATE = #{createdate},
      CLNAME = #{clname,jdbcType=VARCHAR},
      USERID = #{userid,jdbcType=VARCHAR},
      PHONE = #{phone,jdbcType=VARCHAR},
      IDNUMBER = #{idnumber,jdbcType=VARCHAR},
      LIBNAME = #{libname,jdbcType=VARCHAR},
      LIBID = #{libid,jdbcType=VARCHAR},
      VARIETY = #{variety,jdbcType=VARCHAR},
      HTLEVEL = #{htlevel,jdbcType=VARCHAR},
      GLSHUIFEN = #{glshuifen,jdbcType=VARCHAR},
      CNT = #{cnt,jdbcType=VARCHAR},
      PRICE = #{price,jdbcType=VARCHAR},
      ACTIONSTATE = #{actionstate,jdbcType=VARCHAR},
      RETURNSTATE = #{returnstate,jdbcType=VARCHAR},
      SETTLEMENTSTATE = #{settlementstate,jdbcType=VARCHAR},
      VARIETYCODE = #{varietycode,jdbcType=VARCHAR},
      HTLEVELCODE = #{htlevelcode,jdbcType=VARCHAR},
      ISDELETE = #{isdelete,jdbcType=VARCHAR}
    where ID = #{id,jdbcType=DECIMAL}
  </update>
  <select id="queryList" parameterType="com.vt.fencing.model.ZlnfStorage" resultType="com.vt.fencing.model.ZlnfStorage">
  	SELECT t.*,ROWNUM FROM (
	SELECT * FROM(
	SELECT LIBNAME,VARIETY,HTLEVEL,GLSHUIFEN,VARIETYCODE,HTLEVELCODE,LIBID,"SUM"(CNT) CNT FROM (
	SELECT LIBNAME,VARIETY,HTLEVEL,GLSHUIFEN,VARIETYCODE,HTLEVELCODE,LIBID,
	CASE WHEN ACTIONSTATE=1 THEN -1 * TO_NUMBER(CNT) ELSE TO_NUMBER(CNT) END CNT FROM ZLNF_STORAGE WHERE 1=1 
	AND ISDELETE='0' AND SETTLEMENTSTATE!='2' AND IDNUMBER=#{idnumber}
	) GROUP BY LIBNAME,VARIETY,HTLEVEL,GLSHUIFEN,VARIETYCODE,HTLEVELCODE,LIBID
	) ORDER BY LIBNAME ASC
	) t 
  </select>
  <select id="queryVariety" parameterType="com.vt.fencing.model.ZlnfStorage" resultType="com.vt.fencing.model.ZlnfStorage">
  	SELECT VARIETY, "SUM"(CNT) CNT FROM (
	SELECT VARIETY,
	CASE WHEN ACTIONSTATE=1 THEN -1 * TO_NUMBER(CNT) ELSE TO_NUMBER(CNT) END CNT FROM ZLNF_STORAGE WHERE 1=1 
	AND ISDELETE='0' AND SETTLEMENTSTATE!=2 AND IDNUMBER=#{idnumber}
	) GROUP BY VARIETY
  </select>
  <select id="queryRownum" parameterType="com.vt.fencing.model.ZlnfStorage" resultType="com.vt.fencing.model.ZlnfStorage">
    select * from
	   (select a.*,rownum row_num from
	      (select * from ZLNF_STORAGE t 
	      WHERE 1=1 AND ISDELETE='0' AND SETTLEMENTSTATE!='2'
	      <if test="idnumber != null" >
	        AND t.IDNUMBER = #{idnumber,jdbcType=VARCHAR}
	      </if>
	      <if test="libid != null" >
	        AND t.LIBID = #{libid,jdbcType=VARCHAR}
	      </if>
	      order by t.id desc) a
	   ) b 
	 where b.row_num between 1+10*(#{number}-1) and 10+10*(#{number}-1)
  </select>
<!--     <select id="queryRownumRest" parameterType="com.vt.fencing.model.ZlnfStorage" resultType="com.vt.fencing.model.ZlnfStorage">
     select * from
	   (select a.*,rownum row_num from
	      (select * from ZLNF_STORAGE t 
	      WHERE 1=1 AND ISDELETE='0' AND SETTLEMENTSTATE!='2'
	      <if test="idnumber != null" >
	        AND t.IDNUMBER = #{idnumber,jdbcType=VARCHAR}
	      </if>
	      <if test="libid != null" >
	        AND t.LIBID = #{libid,jdbcType=VARCHAR}
	      </if>
	      order by t.id desc) a
	   ) b 
	 where b.row_num &gt;10*(#{number})
	 
  </select> -->
  <select id="queryRownumRest" parameterType="com.vt.fencing.model.ZlnfStorage" resultType="com.vt.fencing.model.ZlnfStorage">
   select "SUM"(b.CNT)  CNT, b.HTLEVEL,b.VARIETY,b.GLSHUIFEN FROM ( SELECT a.HTLEVEL,a.VARIETY,a.GLSHUIFEN ,a.CNT,rownum row_num FROM (select  t.VARIETY, t.ID,
      t.HTLEVEL, t.GLSHUIFEN, CASE WHEN t.ACTIONSTATE=1 THEN -1 * TO_NUMBER(t.CNT) ELSE TO_NUMBER(t.CNT) END CNT
      from ZLNF_STORAGE t 
	      WHERE 1=1 AND t.ISDELETE='0' AND SETTLEMENTSTATE!='2'
	      <if test="idnumber != null" >
	        AND t.IDNUMBER = #{idnumber,jdbcType=VARCHAR}
	      </if>
	      <if test="libid != null" >
	        AND t.LIBID = #{libid,jdbcType=VARCHAR}
	      </if>
	       order by t.id desc)a )b
	       where b.row_num  &gt;10*(#{number})
	 GROUP BY b.HTLEVEL,b.VARIETY,b.GLSHUIFEN
  </select> 
  <select id="queryStr" parameterType="com.vt.fencing.model.ZlnfStorage" resultType="com.vt.fencing.model.ZlnfStorage">
   select b.HTLEVEL,b.VARIETY,b.GLSHUIFEN  FROM( SELECT a.HTLEVEL,a.VARIETY,a.GLSHUIFEN ,rownum row_num FROM (select  t.VARIETY, t.ID,
      t.HTLEVEL, t.GLSHUIFEN, CASE WHEN t.ACTIONSTATE=1 THEN -1 * TO_NUMBER(t.CNT) ELSE TO_NUMBER(t.CNT) END CNT
      from ZLNF_STORAGE t 
	      WHERE 1=1 AND t.ISDELETE='0' AND SETTLEMENTSTATE!='2'
	      <if test="idnumber != null" >
	        AND t.IDNUMBER = #{idnumber,jdbcType=VARCHAR}
	      </if>
	      <if test="libid != null" >
	        AND t.LIBID = #{libid,jdbcType=VARCHAR}
	      </if>
	       order by t.id desc)a )b
	       where b.row_num between 1+10*(#{number}-1) and 10+10*(#{number}-1)
	 GROUP BY b.HTLEVEL,b.VARIETY,b.GLSHUIFEN
  </select>
</mapper>